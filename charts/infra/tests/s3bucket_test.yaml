suite: S3 bucket test
templates:
  - s3bucket.yaml
tests:
  - it: "should not create s3 bucket if no name specified"
    asserts:
      - hasDocuments:
          count: 0
  - it: "should create s3 bucket if name specified"
    set:
      s3Bucket:
        name: "s3-bucket"
    asserts:
      - hasDocuments:
          count: 1
      - equal:
          path: metadata.name
          value: "s3-bucket"
  - it: "should set irsa role name"
    set:
      s3Bucket:
        name: "s3-bucket"
      serviceAccountName: "service-account-name"
    asserts:
      - equal:
          path: "spec.irsaRoleName"
          value: "service-account-name"
